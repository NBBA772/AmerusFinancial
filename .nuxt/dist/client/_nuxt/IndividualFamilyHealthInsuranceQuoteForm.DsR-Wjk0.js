import{B as d,o as u,c as p,a as t,C as b,z as n,A as c,aC as m}from"./entry.Cl9EbFL9.js";import{_ as g}from"./_plugin-vue_export-helper.DlAUqK2U.js";const h={props:{tag:{type:String,default:"newClient"}},data(){return{firstName:"",lastName:"",email:"",phoneNumber:"",birthday:"",message:"",tags:[],coverageType:[]}},methods:{async handleSubmit(){try{const r=await this.createContact(),a={contactId:await this.lookupContact(),body:`Message: ${this.message}
Birthday: ${this.birthday}
Coverage Type: ${this.coverageType.join(", ")}`};if(!(await this.createNote(a)).ok)throw new Error("Failed to create note");this.resetForm(),console.log("Form submitted successfully")}catch(r){console.error("Error submitting form:",r)}},async createContact(){try{const r=d(),e=new Headers;e.append("Content-Type","application/json"),e.append("Authorization",`${r.public.GHL_API_KEY}`);const a={firstName:this.firstName,lastName:this.lastName,email:this.email,phone:this.phoneNumber,tags:[this.tag],birthday:this.birthday},l=JSON.stringify(a),o=await fetch("https://rest.gohighlevel.com/v1/contacts/",{method:"POST",headers:e,body:l,redirect:"follow"});if(!o.ok)throw new Error("Failed to create contact");const i=await o.json();return console.log("Created contact:",i),i}catch(r){throw console.error("Error creating contact:",r),r}},async createNote(r){try{const e=d(),a=new Headers;a.append("Content-Type","application/json"),a.append("Authorization",`${e.public.GHL_API_KEY}`);const l=JSON.stringify(r);return console.log("data ",r),await fetch(`https://rest.gohighlevel.com/v1/contacts/${r.contactId}/notes/`,{method:"POST",headers:a,body:l,redirect:"follow"})}catch(e){throw console.error("Error creating note:",e),e}},async lookupContact(){const r=d();try{const e=new Headers;e.append("Authorization",`${r.public.GHL_API_KEY}`);const a={method:"GET",headers:e,redirect:"follow"},l=await fetch(`https://rest.gohighlevel.com/v1/contacts/lookup?email=${this.email}&phone=${this.phoneNumber}`,a);if(!l.ok)throw new Error("Failed to fetch contact data");const o=await l.json();console.log("Lookup contact response:",o);const i=o.contacts[0];if(!i)throw new Error("No contact found");return i.id}catch(e){throw console.error("Error looking up contact:",e),e}}}},f={class:"px-4 mb-8 md:block"},y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},x={class:"relative mb-6 group"},_=t("label",{for:"floating_first_name",class:"block mb-1 text-sm font-medium text-gray-700 text-left"},"First Name:",-1),v={class:"relative mb-6 group"},w=t("label",{for:"floating_last_name",class:"block mb-1 text-sm font-medium text-gray-700 text-left"},"Last Name:",-1),k={class:"relative mb-6 group"},N=t("label",{for:"email",class:"block mb-1 text-sm font-medium text-gray-700 text-left"},"Email:",-1),C={class:"relative mb-6 group"},T=t("label",{for:"phoneNumber",class:"block mb-1 text-sm font-medium text-gray-700 text-left"},"Phone Number:",-1),E={class:"relative mb-6 group"},S=t("label",{for:"birthday",class:"block mb-1 text-sm font-medium text-gray-700 text-left"},"Birthday:",-1),V={class:"relative mb-6 group"},H={class:"relative mb-6 group"},U=t("label",{class:"block mb-1 text-sm font-medium text-gray-700 text-left"}," Will this be single or family coverage: ",-1),q={class:"flex items-center"},A=t("span",{class:"text-sm text-gray-700"},"Single",-1),F={class:"flex items-center"},I=t("span",{class:"text-sm text-gray-700"},"Family",-1),P={class:"flex items-center"},B=t("span",{class:"text-sm text-gray-700"},"Parental Child",-1),j={class:"relative mb-6 group"},L=t("label",{for:"message",class:"block mb-1 text-sm font-medium text-gray-700 text-left"},"Message:",-1),M=t("button",{type:"submit",class:"block w-full py-2.5 px-5 text-sm text-white bg-indigo-600 hover:bg-indigo-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-lg dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," Request Quote ",-1);function O(r,e,a,l,o,i){return u(),p("div",null,[t("div",f,[t("form",{onSubmit:e[9]||(e[9]=b((...s)=>i.handleSubmit&&i.handleSubmit(...s),["prevent"]))},[t("div",y,[t("div",x,[_,n(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o.firstName=s),id:"floating_first_name",name:"floating_first_name",class:"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500",placeholder:" ",required:""},null,512),[[c,o.firstName]])]),t("div",v,[w,n(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>o.lastName=s),id:"floating_last_name",name:"floating_last_name",class:"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500",placeholder:" ",required:""},null,512),[[c,o.lastName]])])]),t("div",k,[N,n(t("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=s=>o.email=s),id:"email",name:"email",class:"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500",placeholder:" ",required:""},null,512),[[c,o.email]])]),t("div",C,[T,n(t("input",{type:"tel","onUpdate:modelValue":e[3]||(e[3]=s=>o.phoneNumber=s),id:"phoneNumber",name:"phoneNumber",class:"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500",placeholder:" ",required:""},null,512),[[c,o.phoneNumber]])]),t("div",E,[S,n(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>o.birthday=s),id:"birthday",name:"birthday",class:"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500",placeholder:" ",required:""},null,512),[[c,o.birthday]])]),t("div",V,[t("div",H,[U,t("div",q,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>o.coverageType=s),value:"single",class:"form-checkbox h-5 w-5 text-indigo-600 transition duration-150 ease-in-out mr-2"},null,512),[[m,o.coverageType]]),A]),t("div",F,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>o.coverageType=s),value:"family",class:"form-checkbox h-5 w-5 text-indigo-600 transition duration-150 ease-in-out mr-2"},null,512),[[m,o.coverageType]]),I]),t("div",P,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=s=>o.coverageType=s),value:"parentalChild",class:"form-checkbox h-5 w-5 text-indigo-600 transition duration-150 ease-in-out mr-2"},null,512),[[m,o.coverageType]]),B])])]),t("div",j,[L,n(t("textarea",{rows:"4","onUpdate:modelValue":e[8]||(e[8]=s=>o.message=s),id:"message",name:"message",class:"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500",placeholder:" ",required:""},null,512),[[c,o.message]])]),M],32)])])}const R=g(h,[["render",O]]);export{R as default};
