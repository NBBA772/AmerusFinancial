{"version":3,"file":"IndividualFamilyHealthInsuranceQuoteForm-PRbBpZYT.js","sources":["../../../../components/forms/IndividualFamilyHealthInsuranceQuoteForm.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"px-4 mb-8 md:block\">\n      <form @submit.prevent=\"handleSubmit\">\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div class=\"relative mb-6 group\">\n            <label\n              for=\"floating_first_name\"\n              class=\"block mb-1 text-sm font-medium text-gray-700 text-left\"\n              >First Name:</label\n            >\n            <input\n              type=\"text\"\n              v-model=\"firstName\"\n              id=\"floating_first_name\"\n              name=\"floating_first_name\"\n              class=\"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500\"\n              placeholder=\" \"\n              required\n            />\n          </div>\n          <div class=\"relative mb-6 group\">\n            <label\n              for=\"floating_last_name\"\n              class=\"block mb-1 text-sm font-medium text-gray-700 text-left\"\n              >Last Name:</label\n            >\n            <input\n              type=\"text\"\n              v-model=\"lastName\"\n              id=\"floating_last_name\"\n              name=\"floating_last_name\"\n              class=\"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500\"\n              placeholder=\" \"\n              required\n            />\n          </div>\n        </div>\n\n        <div class=\"relative mb-6 group\">\n          <label\n            for=\"email\"\n            class=\"block mb-1 text-sm font-medium text-gray-700 text-left\"\n            >Email:</label\n          >\n          <input\n            type=\"email\"\n            v-model=\"email\"\n            id=\"email\"\n            name=\"email\"\n            class=\"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500\"\n            placeholder=\" \"\n            required\n          />\n        </div>\n\n        <div class=\"relative mb-6 group\">\n          <label\n            for=\"phoneNumber\"\n            class=\"block mb-1 text-sm font-medium text-gray-700 text-left\"\n            >Phone Number:</label\n          >\n          <input\n            type=\"tel\"\n            v-model=\"phoneNumber\"\n            id=\"phoneNumber\"\n            name=\"phoneNumber\"\n            class=\"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500\"\n            placeholder=\" \"\n            required\n          />\n        </div>\n\n        <div class=\"relative mb-6 group\">\n          <label\n            for=\"birthday\"\n            class=\"block mb-1 text-sm font-medium text-gray-700 text-left\"\n            >Birthday:</label\n          >\n          <input\n            type=\"date\"\n            v-model=\"birthday\"\n            id=\"birthday\"\n            name=\"birthday\"\n            class=\"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500\"\n            placeholder=\" \"\n            required\n          />\n        </div>\n\n        <div class=\"relative mb-6 group\">\n          <div class=\"relative mb-6 group\">\n            <label\n              class=\"block mb-1 text-sm font-medium text-gray-700 text-left\"\n            >\n              Will this be single or family coverage:\n            </label>\n            <div class=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                v-model=\"coverageType\"\n                value=\"single\"\n                class=\"form-checkbox h-5 w-5 text-indigo-600 transition duration-150 ease-in-out mr-2\"\n              />\n              <span class=\"text-sm text-gray-700\">Single</span>\n            </div>\n            <div class=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                v-model=\"coverageType\"\n                value=\"family\"\n                class=\"form-checkbox h-5 w-5 text-indigo-600 transition duration-150 ease-in-out mr-2\"\n              />\n              <span class=\"text-sm text-gray-700\">Family</span>\n            </div>\n            <div class=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                v-model=\"coverageType\"\n                value=\"parentalChild\"\n                class=\"form-checkbox h-5 w-5 text-indigo-600 transition duration-150 ease-in-out mr-2\"\n              />\n              <span class=\"text-sm text-gray-700\">Parental Child</span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"relative mb-6 group\">\n          <label\n            for=\"message\"\n            class=\"block mb-1 text-sm font-medium text-gray-700 text-left\"\n            >Message:</label\n          >\n          <textarea\n            rows=\"4\"\n            v-model=\"message\"\n            id=\"message\"\n            name=\"message\"\n            class=\"block w-full py-2.5 px-4 text-sm text-gray-800 bg-gray-100 border-b-2 border-gray-300 focus:outline-none focus:border-blue-500\"\n            placeholder=\" \"\n            required\n          ></textarea>\n        </div>\n\n        <button\n          type=\"submit\"\n          class=\"block w-full py-2.5 px-5 text-sm text-white bg-indigo-600 hover:bg-indigo-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-lg dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\"\n        >\n          Request Quote\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    tag: {\n      type: String,\n      default: \"newClient\", // Default tag if not provided\n    },\n  },\n  data() {\n    return {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      phoneNumber: \"\",\n      birthday: \"\",\n      message: \"\",\n      tags: [],\n      coverageType: [],\n    };\n  },\n  methods: {\n    async handleSubmit() {\n      try {\n        // Create contact\n        const contact = await this.createContact();\n\n        // Lookup contact to get contactId\n        const contactId = await this.lookupContact();\n\n        // Make a note for the newly created contact\n        const noteData = {\n          contactId: contactId,\n          body: `Message: ${this.message}\\nBirthday: ${\n            this.birthday\n          }\\nCoverage Type: ${this.coverageType.join(\", \")}`,\n        };\n\n        const noteResponse = await this.createNote(noteData);\n\n        if (!noteResponse.ok) {\n          throw new Error(\"Failed to create note\");\n        }\n\n        // Reset form fields or show success message\n        this.resetForm();\n\n        console.log(\"Form submitted successfully\");\n      } catch (error) {\n        console.error(\"Error submitting form:\", error);\n      }\n    },\n    async createContact() {\n      try {\n        const config = useRuntimeConfig();\n        const myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        myHeaders.append(\"Authorization\", `${config.public.GHL_API_KEY}`);\n\n        const data = {\n          firstName: this.firstName,\n          lastName: this.lastName,\n          email: this.email,\n          phone: this.phoneNumber,\n          tags: [this.tag],\n          birthday: this.birthday,\n        };\n\n        const raw = JSON.stringify(data);\n\n        const response = await fetch(\n          \"https://rest.gohighlevel.com/v1/contacts/\",\n          {\n            method: \"POST\",\n            headers: myHeaders,\n            body: raw,\n            redirect: \"follow\",\n          }\n        );\n\n        if (!response.ok) {\n          throw new Error(\"Failed to create contact\");\n        }\n\n        const contact = await response.json();\n        console.log(\"Created contact:\", contact); // Log the contact object\n\n        return contact; // Return the contact object\n      } catch (error) {\n        console.error(\"Error creating contact:\", error);\n        throw error;\n      }\n    },\n\n    async createNote(data) {\n      try {\n        const config = useRuntimeConfig();\n        const myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        myHeaders.append(\"Authorization\", `${config.public.GHL_API_KEY}`);\n\n        const raw = JSON.stringify(data);\n        console.log(\"data \", data);\n        return await fetch(\n          `https://rest.gohighlevel.com/v1/contacts/${data.contactId}/notes/`,\n          {\n            method: \"POST\",\n            headers: myHeaders,\n            body: raw,\n            redirect: \"follow\",\n          }\n        );\n      } catch (error) {\n        console.error(\"Error creating note:\", error);\n        throw error;\n      }\n    },\n    async lookupContact() {\n      const config = useRuntimeConfig();\n      try {\n        const myHeaders = new Headers();\n        myHeaders.append(\"Authorization\", `${config.public.GHL_API_KEY}`);\n\n        const requestOptions = {\n          method: \"GET\",\n          headers: myHeaders,\n          redirect: \"follow\",\n        };\n\n        const response = await fetch(\n          `https://rest.gohighlevel.com/v1/contacts/lookup?email=${this.email}&phone=${this.phoneNumber}`,\n          requestOptions\n        );\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch contact data\");\n        }\n\n        const data = await response.json();\n        console.log(\"Lookup contact response:\", data); // Log the response\n\n        // Assuming contacts array contains multiple contacts, get the first one\n        const contacted = data.contacts[0];\n\n        if (!contacted) {\n          throw new Error(\"No contact found\");\n        }\n\n        return contacted.id; // Return the id of the contacted contact\n      } catch (error) {\n        console.error(\"Error looking up contact:\", error);\n        throw error;\n      }\n    },\n  },\n};\n</script>\n\n"],"names":["_ssrRenderAttrs","_ssrRenderAttr","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrInterpolate"],"mappings":"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"}