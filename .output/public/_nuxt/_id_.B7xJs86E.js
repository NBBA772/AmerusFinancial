import N from"./PatternSection.vDldGVwv.js";import{g as P}from"./getParam.D0PhPRFF.js";import{g as B,i as p,q as E,h as S,j as x,s as L,o as a,f as g,w as T,a as t,b as k,l as e,c as i,k as r,t as _,r as D,F as Q,v as R,x as U,m as $}from"./entry.Cl9EbFL9.js";import{_ as z}from"./DashboardSidebar.vue.Bzq8x5VG.js";import{_ as M}from"./AnswerForm.vue.C4FFFAg0.js";import{_ as O}from"./QuestionForm.vue.-EOvJ-Q1.js";import{_ as W}from"./Tiptap.vue.MK20--fy.js";import"./_plugin-vue_export-helper.DlAUqK2U.js";import"./Icon._ORiZCfB.js";import"./nuxt-link.CtKDrDok.js";const G=t("div",{class:"h-32 flex justify-center"},[t("div",{class:"flex m-5"},[t("h1",{class:"py-9 text-center text-5xl font-extrabold text-gray-900 dark:text-gray-400 ml-4"}," Questions ")])],-1),H={class:"md:flex min-h-full"},J={class:"w-full z-1 justify-right relative"},K={key:0,class:"p-8 text-white bg-lime-600 dark:bg-black rounded shadow-md"},X={key:1,class:"flex w-full flex-column justify-center transition duration-500"},Y={class:"w-full p-4"},Z={class:"p-8 bg-white dark:bg-gray-800 rounded shadow-md"},ee={class:"flex justify-end dark:text-gray-300"},te={class:"text-2xl font-bold text-gray-800 dark:text-gray-300"},se={key:1,class:"mt-5"},oe={class:"max-w-xxl w-full p-4"},ae={class:"p-8 bg-white dark:bg-slate-900 rounded shadow-md"},de={class:"flex justify-end dark:text-gray-300"},ne={class:"dark:text-gray-300"},ie={class:"flex justify-end"},re={key:2},le="/api/dashboard/edit-question",ve=B({__name:"[id]",async setup(ue){var y;let s,l;const m=P("id"),u=([s,l]=p(()=>R()),s=await s,l(),s),j=E(),A=S(),f=x(!1),b=x(!1);x(!1);let h=!0;const C=([s,l]=p(()=>U()),s=await s,l(),s),{data:o}=([s,l]=p(()=>$(`/api/dashboard/question?id=${m}`,{key:A.fullPath},"$te9asCt6WP")),s=await s,l(),s),c=L("showAnswerForm"+m,()=>!1),q=((y=o==null?void 0:o.value)==null?void 0:y.authorId)==(u==null?void 0:u.id);(u==null?void 0:u.id)===1?h=!0:h=!1;async function F(){await $("/api/dashboard/delete-question",{method:"POST",body:{questionId:m}},"$l240gTkide"),b.value=!0,setTimeout(()=>{j.push("/dashboard/search")})}function I(v){var d;console.log("&&&&&&&&& add answer"),(d=o.value)==null||d.answers.push(v),c.value=!1}return(v,d)=>{const V=N;return a(),g(V,null,{default:T(()=>{var w;return[G,t("div",H,[k(z),t("div",J,[e(b)?(a(),i("div",K," question deleted ")):r("",!0),e(o)?(a(),i("div",X,[t("div",Y,[t("div",Z,[t("div",ee,_(e(o).authName),1),t("h2",te,_(e(o).title),1),e(f)?r("",!0):(a(),g(W,{key:0,modelValue:e(o).description,"onUpdate:modelValue":d[0]||(d[0]=n=>e(o).description=n),label:"",editable:!1},null,8,["modelValue"])),q&&e(f)==!1?(a(),i("div",se,[t("button",{onClick:d[1]||(d[1]=n=>f.value=!0),class:"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded"}," Edit "),t("button",{onClick:F,class:"bg-red-500 ml-3 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded"}," delete ")])):r("",!0),e(f)?(a(),g(O,{key:2,endpoint:le,data:e(o)},null,8,["data"])):r("",!0)])])])):r("",!0),(a(!0),i(Q,null,D((w=e(o))==null?void 0:w.answers,n=>(a(),i("div",{key:n.id,class:"flex flex-column justify-center hover:scale-110 transition duration-500"},[t("div",oe,[t("div",ae,[t("div",de,_(n.authorName),1),t("p",ne,_(n.text),1)])])]))),128)),t("div",ie,[!e(c)&&e(C)&&e(h)?(a(),i("button",{key:0,onClick:d[2]||(d[2]=n=>c.value=!e(c)),type:"button",class:"dark:focus:ring-amber-800 bg-blue-400 hover:bg-blue-800 dark:bg-amber-500 dark:hover:bg-amber-600 font-medium text-sm rounded-lg px-5 py-2.5 mr-2 mb-2"}," Answer ")):r("",!0)]),e(c)?(a(),i("div",re,[k(M,{questionId:e(m),onAddAnswer:I},null,8,["questionId"])])):r("",!0)])])]}),_:1})}}});export{ve as default};
